(this.webpackJsonpecopay=this.webpackJsonpecopay||[]).push([[0],{171:function(e,t,a){},172:function(e,t,a){},174:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),c=a(16),r=a.n(c),i=(a(80),a(6)),s=a.n(i),l=a(4),u=a(74),d=a(13),f=a(20),v=a(21),m=a(35),p=a(34),g=a(44),h=(a(86),a(2)),b={"7_day_global_travel_cover":{active:!0,caption:"7 Day Global Travel Cover",description:"Taking care of the travel community with hassle-free-travel insurance through your smartphone. Explanations in plain English, and it's easy to tailor your cover and see instant price changes. So it's clear what you're buying and what you're covered for.",footer_1:"\xa39 one off cost",footer_2:"Save \xa35 on average",for:0,image:"https://firebasestorage.googleapis.com/v0/b/boltconcierge-2f0f9.appspot.com/o/packages_quickbuy%2F7%20Day%20Global%20Travel%20Cover.png?alt=media&token=fa46c033-5b77-4d12-bd5c-0090327c121e",isgroup:0,order:7,price:9,type:1},cycling:{active:!1,caption:"Happy Cycling Pack",contents:["Dedicated cycling concierge","Bike cover of up to \xa31000","No excess","Gold Lock","Smart Bike Tracking Sticker","Cycling discounts & access"],description:"Smooth cycling. A dedicated concierge with seamless cover.",footer_1:"\xa310 cost per month",footer_2:"Save \xa3210+ per month",for:0,image:"https://firebasestorage.googleapis.com/v0/b/boltconcierge-2f0f9.appspot.com/o/packages%2Fbike.jpg?alt=media&token=a48f5b59-9730-4f23-a7df-d7359b577108",isgroup:0,order:5,price:10,type:0},daily_workspace_pass:{active:!0,caption:"Daily Workspace Pass",description:"Discover spaces that inspire your most impactful work, on demand. Our co-working spaces create a community of people who work to make a life, not just a living.\\n They're beautifully designed, stocked with premium amenities.",footer_1:"\xa35 cost per day",footer_2:"Save \xa315 on average",for:0,image:"https://firebasestorage.googleapis.com/v0/b/boltconcierge-2f0f9.appspot.com/o/packages_quickbuy%2FDaily%20Workspace%20Access.png?alt=media&token=127fb742-b0f4-4024-9662-8c64ea2d1f65",isgroup:0,order:6,price:5,type:1},gold:{active:!0,caption:"Renter Pack",contents:["Rent without a deposit","Verified renter ID & certificate to share","Damage, Default & Void - No excess","Legal cover for your landlord","Monthly & End of Tenancy Cleaning","Key warrantly and replacement (No excess)"],description:"Rent without a deposit, while covering all risk & cleaning.",footer_1:"\xa350 cost per month",footer_2:"Save \xa3410+ per month",for:1,image:"https://firebasestorage.googleapis.com/v0/b/boltconcierge-2f0f9.appspot.com/o/packages%2Fgold.jpg?alt=media&token=7c6d32de-e497-4985-be94-d2ee36706b8c",isgroup:1,order:4,price:50,type:0},health_fitness:{active:!1,caption:"Health & Fitness Pack",contents:["Healthy, well & fit tracker","24 hour health concierge","Access to classes","Access to gyms","Peloton Live Pass","Fitbit watch"],description:"A bespoke health concierge building your wellness, with insider access.",footer_1:"\xa350 cost per month",footer_2:" Save \xa344+ per month",for:0,image:"https://firebasestorage.googleapis.com/v0/b/boltconcierge-2f0f9.appspot.com/o/packages%2Fhealth.jpg?alt=media&token=8823faaa-fe3c-416e-b70e-e17e3dc097b8",isgroup:0,order:2,price:50,type:0},home:{active:!0,caption:"Serviced Home Pack",contents:["Home concierge services","Energy & Water","Wifi & Netflix","Emergency Maintenance","All Damage","Legal cover & landlord enforcement","Monthly & Checkout Clean"],description:"The dream serviced home, its like staying in a luxury hotel",footer_1:"\xa3200 cost per month",footer_2:"Save \xa3120+ per month",for:1,image:"https://firebasestorage.googleapis.com/v0/b/boltconcierge-2f0f9.appspot.com/o/packages%2Fhome.jpg?alt=media&token=3f137ec4-a6c9-47fe-8f84-e8c2c036d1e7",isgroup:1,order:3,price:200,type:0},member:{active:!0,caption:"Membership Pack",contents:["VIP concierge & access","Cashback card - 8-15% back","50% Dining and Cinema","Socials & Parties","Art & Culture","Free monthly mocktail, cocktail or beer","Monthly credit rating update in app"],description:"A VIP Concierge and membership, for those who deserve more for less",footer_1:"\xa310 cost per month",footer_2:"Save \xa3100+ per month",for:0,image:"https://firebasestorage.googleapis.com/v0/b/boltconcierge-2f0f9.appspot.com/o/packages%2Fmembership.jpg?alt=media&token=1e6fbb2c-a5e4-4031-894c-23207e58a835",isgroup:0,order:0,price:9.99,type:0},mobile_card_reader:{active:!1,caption:"Mobile Card Reader",description:"Take payments with flexible connection by Bluetooth, Wi-Fi and GPRS. It's easy to take payments where your customers are. Accept all major credit and debit cards including Visa, Mastercard, Diners Club International, Discover and American Express.",footer_1:"\xa325+VAT cost per month",footer_2:"Save 15 hours a month",for:0,image:"https://firebasestorage.googleapis.com/v0/b/boltconcierge-2f0f9.appspot.com/o/packages%2FMobile%20Card%20Reader.png?alt=media&token=d1389590-928c-48a0-99c0-2b61e75d5d65",isgroup:0,order:1,price:10,type:0},owner_home:{active:!0,caption:"Serviced Home Pack",contents:["Home concierge services","Energy & Water","Wifi & Netflix","All Maintenance","All Damage","Monthly Cleaning"],description:"The Dream serviced home, its like staying in a luxury hotel",footer_1:"\xa3150 cost per month",footer_2:"Save \xa3120+ per month",for:2,image:"https://firebasestorage.googleapis.com/v0/b/boltconcierge-2f0f9.appspot.com/o/packages%2Fmembership.jpg?alt=media&token=1e6fbb2c-a5e4-4031-894c-23207e58a835",isgroup:1,order:3,price:150,type:0}};a(96);var y={apiKey:"AIzaSyBlBJtz1oV7_pWAyjrlkxdJ7ZenisHP5sk",projectId:"boltconcierge-2f0f9",databaseURL:"https://boltconcierge-2f0f9.firebaseio.com",storageBucket:"boltconcierge-2f0f9.appspot.com"};function k(e,t){return e.reduce((function(e,a){return n=a,e.some((function(e){return e[t]===n[t]}))?e:e.concat([a]);var n}),[])}var A=function(e,t){return e<t?e+t:t+e},E=function(){function e(){Object(f.a)(this,e)}return Object(v.a)(e,null,[{key:"initialize",value:function(){h.initializeApp(y)}},{key:"storage",value:function(){return h.storage()}},{key:"getStorage",value:function(){return h.storage}},{key:"firestore",value:function(){return h.firestore()}},{key:"getAllUsersInBrand",value:function(t){return"Ecosystem"===t?e.firestore().collection("user").get().then((function(e){return e.docs.map((function(e){return e.data()}))})):e.firestore().collection(t).doc("data").collection("user").get().then((function(e){return e.docs.map((function(e){return e.data()}))}))}},{key:"getBrandDataByName",value:function(e,t){h.database().ref("brands").orderByChild("name").equalTo(e).on("value",(function(e){var a;a=e.val();var n=Object.values(a).find((function(e){return!e.deactive}));t(n)}))}},{key:"uploadImage",value:function(e,t,a){var n=this,o="/"+a+"/"+t.replace(/[^a-zA-Z]/g,"")+(new Date).valueOf()+".png";return new Promise((function(t,a){var c=n.storage().ref(o);c.putString(e,"base64").then((function(e){c.getDownloadURL().then((function(e){t(e)})).catch((function(e){a(e)}))}))}))}},{key:"addPost",value:function(){var e=Object(d.a)(s.a.mark((function e(t,a){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.firestore.Timestamp.fromDate(new Date);case 2:return n=e.sent,e.abrupt("return",h.firestore().collection(a).doc("data").collection("post").add({title:t.title,content:t.content,uid:t.uid,timestamp:n,img_url:t.image_url,type:t.type,topic:t.topic,accepted:""}));case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"getUserDatafromUID",value:function(e,t){h.firestore().collection("user").doc("".concat(e)).get().then((function(e){t(e.data())})).catch((function(e){}))}},{key:"getCommunityChats",value:function(e,t,a){var n="community_livechat/"+A(e,t);h.database().ref(n).on("value",(function(e){var t=[],n=e.val();if(n)for(var o in n)t.push(Object(l.a)({messageId:o},n[o]));a(t)}))}},{key:"addCommunityChat",value:function(e,t,a,n){var o=A(e,t),c="community_livechat/".concat(o);h.database().ref(c).push(a,n)}},{key:"removeCommunityChat",value:function(e,t,a,n){var o=A(e,t),c="community_livechat/".concat(o,"/").concat(a);h.database().ref(c).remove(n)}},{key:"getAllTokenEarnings",value:function(t){return e.firestore().collection("token_earning").onSnapshot((function(e){var a=[];e.forEach((function(e){a.push(Object(l.a)({id:e.id},e.data()))})),t(a)}))}},{key:"getAllTicketsById",value:function(e,t){var a="livechat/"+e+"/tickets";h.database().ref(a).on("value",(function(e){var a=[];e.val()&&(a=e.val()),t(a)}))}},{key:"getAllItem",value:function(e){h.database().ref("chatbot/quez").once("value",(function(t){var a=[];t.val()&&(a=t.val());var n=k(a,"item").map((function(e){return e.item}));e(n)}))}},{key:"getAllRoom",value:function(e){h.database().ref("chatbot/rooms").once("value",(function(t){var a=[];t.val()&&(a=t.val()),e(a)}))}},{key:"getAllAdjective",value:function(e){h.database().ref("chatbot/quez").once("value",(function(t){var a=[];t.val()&&(a=t.val());var n=k(a,"adjective").map((function(e){return e.adjective}));e(n)}))}},{key:"getAllWellness",value:function(e){h.database().ref("wellness_tickets").once("value",(function(t){var a=[];t.val()&&(a=t.val()),e(a)}))}},{key:"getRoomByItem",value:function(e,t){h.database().ref("chatbot/quez").orderByChild("item").equalTo(e).once("value",(function(e){var a=[];e.val()&&(a=e.val());var n=(a=Object.values(a)).map((function(e){return{value:e.adjective,label:e.adjective.toLowerCase()}}));if(a.pop().room){var o=k(a,"room").map((function(e){return e.room}));t(o,n)}else t(null,n)}))}},{key:"getLocationByCuisine",value:function(e,t){h.database().ref("restaurant_foods/").orderByChild("cuisine").equalTo(e).once("value",(function(e){var a=[];e.val()&&(a=e.val());var n=k(a=Object.values(a),"location");t(n)}))}},{key:"getAllLocations",value:function(e){h.database().ref("restaurant_foods/").once("value",(function(t){var a=[];t.val()&&(a=t.val());var n=k(a,"location");e(n)}))}},{key:"getAllCuisines",value:function(e){h.database().ref("restaurant_foods/").once("value",(function(t){var a=[];t.val()&&(a=t.val());var n=k(a,"cuisine").map((function(e){return e.cuisine}));e(n)}))}},{key:"getChats",value:function(e,t,a){var n="livechat/"+e+"/tickets/"+t+"/content";h.database().ref(n).on("value",(function(e){var t=[];e.val()&&(t=e.val()),a(t)}))}},{key:"getTicketData",value:function(e,t,a){var n="livechat/"+e+"/tickets/"+t;h.database().ref(n).on("value",(function(e){var t=[];e.val()&&(t=e.val()),a(t)}))}},{key:"getChatsById",value:function(e,t){var a="livechat/"+e+"/unread";h.database().ref(a).on("value",(function(e){var a=null;e.val()&&(a=e.val()),t(a)}))}},{key:"addMessage",value:function(e,t,a,n){var o="livechat/"+e+"/tickets/"+t+"/content";h.database().ref(o).push().set(a,n(!0))}},{key:"getAllSuperAdmins",value:function(e){h.database().ref("agencies/").orderByChild("role").equalTo(0).on("value",(function(t){var a;a=t.val();var n=Object.values(a);e(n)}))}},{key:"getAgencyTyping",value:function(e,t,a){var n="livechat/"+e+"/tickets/"+t+"/agency_typing";h.database().ref(n).on("value",(function(e){e.val()?a(e.val()):a(!1)}))}},{key:"getLandlordTyping",value:function(e,t,a){var n="livechat/"+e+"/tickets/"+t+"/landlord_typing";h.database().ref(n).on("value",(function(e){e.val()?a(e.val()):a(!1)}))}},{key:"getContractorTyping",value:function(e,t,a){var n="livechat/"+e+"/tickets/"+t+"/contractor_typing";h.database().ref(n).on("value",(function(e){e.val()?a(e.val()):a(!1)}))}},{key:"getStatus",value:function(e,t,a){var n="livechat/"+e+"/tickets/"+t+"/status";h.database().ref(n).on("value",(function(e){e.val()&&a(e.val())}))}},{key:"terminateChat",value:function(e,t){var a="livechat/"+e+"/tickets/"+t;return new Promise((function(e,t){h.database().ref(a).update({content:null,status:"Closed"}).then((function(){e("success")})).catch((function(e){t(e)}))}))}},{key:"setTypeValue",value:function(e,t,a){var n="livechat/"+e+"/tickets/"+t;h.database().ref(n).update({user_typing:a})}},{key:"addAvatar",value:function(e,t){var a=this;return new Promise((function(n,o){var c=a.storage().ref("/avatars/".concat(e,".png"));c.putString(t,"base64").then((function(e){c.getDownloadURL().then((function(e){n(e)})).catch((function(e){o(e),console.log(e.message)}))})).catch((function(e){o(e)}))}))}},{key:"updateUserById",value:function(e,t,a){return new Promise((function(n,o){("Ecosystem"===t?h.firestore().collection("user"):h.firestore().collection(t).doc("data").collection("user")).doc("".concat(e)).set(a,{merge:!0})}))}},{key:"addPaymentMethod",value:function(e,t,a){return new Promise((function(n,o){("Ecosystem"===e?h.firestore().collection("user"):h.firestore().collection(e).doc("data").collection("user")).doc(t).collection("braintree_payment_method").add(a).then((function(e){n(e)})).catch((function(e){o(e)}))}))}},{key:"getAllPaymentMethods",value:function(e,t,a){("Ecosystem"===e?h.firestore().collection("user"):h.firestore().collection(e).doc("data").collection("user")).doc(t).collection("braintree_payment_method").onSnapshot((function(e){a(e.docs.map((function(e){return Object(l.a)(Object(l.a)({},e.data()),{},{id:e.id})})))}))}},{key:"removePaymentMethod",value:function(e,t,a){return("Ecosystem"===e?h.firestore().collection("user"):h.firestore().collection(e).doc("data").collection("user")).doc(t).collection("braintree_payment_method").doc(a).delete()}},{key:"addSubscription",value:function(e,t,a,n,o,c,r){return new Promise((function(i,s){("Ecosystem"===e?h.firestore().collection("user"):h.firestore().collection(e).doc("data").collection("user")).doc(t).collection("subscriptions").add({product_id:a,type:o,status:n,credit_card:c,amount:r}).then((function(e){i(e)})).catch((function(e){s(e)}))}))}},{key:"getAllSubscriptions",value:function(e,t,a){("Ecosystem"===e?h.firestore().collection("user"):h.firestore().collection(e).doc("data").collection("user")).doc(t).collection("subscriptions").onSnapshot((function(e){a(e.docs.map((function(e){return Object(l.a)(Object(l.a)({},e.data()),{},{id:e.id})})))}))}}]),e}();E.getAllBrands=function(e){h.database().ref("brands").on("value",(function(t){var a=[];t.val()&&(a=t.val()),e(a)}))},E.updateUserData=function(e,t,a){return new Promise((function(n,o){var c;(c="Ecosystem"===e?h.firestore().collection("user"):h.firestore().collection(e).doc("data").collection("user")).doc("".concat(t)).set(a,{merge:!0}).then((function(e){c.doc("".concat(t)).get().then((function(e){n(e.data())})).catch((function(e){o(e)}))})).catch((function(e){o(e)}))}))},E.saveTokenSpentHistory=function(e,t,a){return new Promise((function(n,o){("Ecosystem"===e?h.firestore().collection("user"):h.firestore().collection(e).doc("data").collection("user")).doc("".concat(t)).collection("token_history").add(a).then((function(e){n(e)})).catch((function(e){o(e)}))}))},E.getBoltPackages=function(e){h.database().ref("packages/").on("value",(function(t){var a;a=t.val(),e(a)}))},E.getPollsData=function(e){return new Promise((function(t,a){h.firestore().collection(e).doc("data").collection("user").get().then((function(e){var a=[];e.forEach((function(e){var t=e.data();a.push(t)})),t(a)})).catch((function(e){a(e)}))}))},E.subscribeUserDatafromUID=function(e,t,a){"Ecosystem"!==e?h.firestore().collection(e).doc("data").collection("user").doc("".concat(t)).onSnapshot((function(e){a(e.data())})):h.firestore().collection("user").doc("".concat(t)).onSnapshot((function(e){a(e.data())}))},E.addFriend=function(e,t,a){return new Promise((function(n,o){"Ecosystem"!==a?h.firestore().collection("".concat(a)).doc("data").collection("user").where("phonenumber","==",t).get().then((function(c){c.size?n(null):h.firestore().collection("".concat(a)).doc("data").collection("user").add({firstname:e,phonenumber:t,tokens:300}).then((function(e){n(e)})).catch((function(){o(null)}))})).catch((function(){o(null)})):h.firestore().collection("user").where("phonenumber","==",t).get().then((function(c){c.size?o(null):h.firestore().collection("".concat(a)).add({firstname:e,phonenumber:t,tokens:300}).then((function(e){n(e)})).catch((function(){o(null)}))})).catch((function(){o(null)}))}))},E.updateBrandPackage=function(e){var t="brands/"+e;h.database().ref(t).update({packages:b})},E.getAllRetailers=function(e){h.database().ref("retailers/all").on("value",(function(t){var a;a=t.val();var n=Object.keys(a).map((function(e){return Object(l.a)({uid:e},a[e])}));e(n)}))},E.getAllRetailersOnce=function(e){h.database().ref("retailers/all").once("value",(function(t){var a;a=t.val();var n=Object.keys(a).map((function(e){return Object(l.a)({uid:e},a[e])}));e(n)}))},E.getAllDeactiveRetailers=function(e){h.database().ref("retailers/deactive").on("value",(function(t){var a=[];t.val()&&(a=t.val()),e(a)}))},E.getAllDeactiveRetailersOnce=function(e){h.database().ref("retailers/deactive").once("value",(function(t){var a=[];t.val()&&(a=t.val()),e(a)}))},E.getAllOffers=function(e){h.database().ref("offers/redeem_offers").on("value",(function(t){var a;a=t.val();var n=Object.values(a);e(n)}))},E.getAllDeactiveOffers=function(e){h.database().ref("offers/deactive_offers").on("value",(function(t){var a=[];t.val()&&(a=t.val()),e(a)}))},E.getServicesRouting=function(e,t){h.database().ref("brands").orderByChild("name").equalTo(e).on("value",(function(e){var a;a=e.val();var n=Object.values(a)[0];t(n.services_routing)}))},E.getTier1byID=function(e){var t="tier1/"+e;return new Promise((function(e,a){h.database().ref(t).once("value",(function(t){var a=t.val();e(a)}))}))},E.getCategorybyID=function(e){var t="categories/"+e;return new Promise((function(e,a){h.database().ref(t).once("value",(function(t){var a=t.val();e(a)}))}))},E.getCategoryIDbyTitle=function(e){return new Promise((function(t,a){h.database().ref("categories").orderByChild("topic").equalTo(e).once("value",(function(e){var a=[];e.val()&&(a=Object.keys(e.val())),a.length>0?t(a[0]):t(!1)}))}))},E.signup=function(e,t){var a=e.phonenumber;return new Promise((function(n,o){"Ecosystem"!==t?h.firestore().collection("".concat(t)).doc("data").collection("user").where("phonenumber","==",a).get().then((function(a){a.size?n(!1):h.firestore().collection("".concat(t)).doc("data").collection("user").add(e).then((function(e){n(e)})).catch((function(e){o(e)}))})).catch((function(e){o(e)})):h.firestore().collection("user").where("phonenumber","==",a).get().then((function(a){a.size?n(!1):h.firestore().collection("".concat(t)).add(e).then((function(e){n(e)})).catch((function(e){o(e)}))})).catch((function(e){o(e)}))}))},E.getProfile=function(e,t){return new Promise((function(a,n){"Ecosystem"!==t?h.firestore().collection("".concat(t)).doc("data").collection("user").where("phonenumber","==",e).limit(1).get().then((function(e){0===e.size?a(!1):a(e.docs[0])})).catch((function(e){n(e)})):h.firestore().collection("user").where("phonenumber","==",e).limit(1).get().then((function(e){0===e.size?a(!1):a(e.docs[0])})).catch((function(e){n(e)}))}))},E.getProfileByUID=function(e,t){return new Promise((function(a,n){"Ecosystem"!==t?h.firestore().collection("".concat(t)).doc("data").collection("user").doc(e).get().then((function(e){e.data()?a(e.data()):a(!1)})).catch((function(e){n(e)})):h.firestore().collection("user").doc(e).get().then((function(e){e.data()?a(e.data()):a(!1)})).catch((function(e){n(e)}))}))},E.findAnswer=function(e,t,a,n){h.database().ref("chatbot/quez").orderByChild("item_room_adjective").equalTo(e+"_"+t+"_"+a).once("value",(function(t){var o=[];if(t.val()&&(o=Object.values(t.val())),o.length){var c=o[0].ticket;h.database().ref("chatbot/answers").orderByChild("ticket").equalTo(c).once("value",(function(e){var t;t=Object.values(e.val()),n(t[0])}))}else h.database().ref("chatbot/quez").orderByChild("item_room_adjective").equalTo(e+"__"+a).once("value",(function(e){if(e.val()){var t=Object.values(e.val())[0].ticket;h.database().ref("chatbot/answers").orderByChild("ticket").equalTo(t).once("value",(function(e){var t;t=Object.values(e.val()),n(t[0])}))}}))}))},E.readMessage=function(e){var t="livechat/"+e;h.database().ref(t).update({unread:null})},E.requestChat=function(e,t,a,n){var o={uid:e,username:t};"Ecosystem"!==a&&(o.brand=a);var c="livechat/"+e;h.database().ref(c).update(o);var r="livechat/"+e+"/tickets/"+(""+n.id).split(".").join("");h.database().ref(r).set({ticket_id:n.id,issue:n.issue,title:n.title,status:n.status,time:n.time,item:n.item?n.item:null,room:n.room?n.room:null,band:n.band?n.band:null,adjective:n.adjective?n.adjective:null,response_sla:n.response_sla?n.response_sla:null,repair_sla:n.repair_sla?n.repair_sla:null})},E.updateProfileRole=function(e,t,a){return new Promise((function(n,o){("Ecosystem"===e?h.firestore().collection("user"):h.firestore().collection(e).doc("data").collection("user")).doc(t).update({renter_owner:a}).then((function(e){n(e)})).catch((function(e){o(e)}))}))},E.initialize();var w=E,C=a(32),j=a(73);a(97),a(98),a(115);var D=function(){var e=Object(d.a)(s.a.mark((function e(t,a,n,o,c){var r,i,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"",r="https://apricot-mole-2227.twil.io/invite-friend?phoneNumber=".concat(o,"&firstName=").concat(t,"&brand=").concat(n,"&otherName=").concat(a,"&bespokeUrl=").concat(c),e.next=5,fetch(r,{method:"GET"});case 5:return i=e.sent,e.next=8,i.json();case 8:return l=e.sent,e.abrupt("return",l);case 12:return e.prev=12,e.t0=e.catch(0),e.abrupt("return",e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,a,n,o,c){return e.apply(this,arguments)}}(),S=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).onChangeHandler=function(e){n.setState(Object(C.a)({},e.target.name,e.target.value))},n.handlePhoneAppendix=function(e){n.setState({phoneAppendix:e})},n.addUser=function(){var e,t=n.state,a=t.firstname,o=t.phonenumber,c=t.phoneAppendix;(0,n.props.addUser)(a,"".concat(c.value).concat(("0"===(e=o).charAt(0)&&(e=e.replace("0","")),e)))},n.state={firstname:"",phonenumber:"",phoneAppendix:{value:"+44",label:"+44"}},n}return Object(v.a)(a,[{key:"render",value:function(){var e=this.state,t=e.firstname,a=e.phonenumber,n=e.phoneAppendix;return o.a.createElement("div",{className:"modal fade",id:"add_community_member",tabIndex:"-1",role:"dialog","aria-labelledby":"modal-default-fadein","aria-hidden":"true"},o.a.createElement("div",{className:"modal-dialog",role:"document"},o.a.createElement("div",{className:"modal-content"},o.a.createElement("div",{className:"modal-header"},o.a.createElement("h5",{className:"modal-title"},"Invite Friend"),o.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},o.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),o.a.createElement("div",{className:"modal-body pb-1"},o.a.createElement("div",{className:"form-group"},o.a.createElement("input",{type:"text",className:"form-control form-control-lg form-control-alt",id:"signup-username",name:"firstname",placeholder:"First Name",onChange:this.onChangeHandler,value:t})),o.a.createElement("div",{className:"invite-user-phone-group"},o.a.createElement("div",{className:"form-group phone-appendix"},o.a.createElement(j.a,{value:n,onChange:this.handlePhoneAppendix,options:[{value:"+44",label:"+44"},{value:"+1",label:"+1"}]})),o.a.createElement("div",{className:"form-group phone-number"},o.a.createElement("input",{type:"number",className:"form-control form-control-lg form-control-alt",id:"signup-email",name:"phonenumber",placeholder:"Phone Number",onChange:this.onChangeHandler,value:a})))),o.a.createElement("div",{className:"modal-footer"},o.a.createElement("button",{type:"button",className:"btn btn-sm btn-light","data-dismiss":"modal"},"Close"),o.a.createElement("button",{type:"button",className:"btn btn-sm btn-success","data-dismiss":"modal",onClick:this.addUser},"Invite")))))}}]),a}(o.a.PureComponent),B=a(70),O=a.n(B),P=a(71),I=a.n(P),N=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).fetchUsers=function(){var e=n.state,t=e.brand,a=e.uid;t.name&&w.subscribeUserDatafromUID(t.name,a,(function(e){e&&n.setState({user:e,friends:e.friends||[]})}))},n.addFriend=function(){var e=Object(d.a)(s.a.mark((function e(t,a){var o,c,r,i,d,f;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=n.state,c=o.friends,r=o.user,i=o.brand,d=o.uid,f=o.profile,w.addFriend(t,a,i.name).then((function(e){var n=e.id;w.updateUserById(d,i.name,{friends:[].concat(Object(u.a)(c.map((function(e){return{uid:e.uid,firstname:e.firstname}}))),[{uid:n,firstname:t}]),tokens:(r.tokens||0)+500});Object(l.a)(Object(l.a)({},f),{},{tokens:(f.tokens||0)+500});D(t,r.firstname,i.name,a,i.bespokeUrl)})).catch((function(){alert("You cannot invite this user because this phone number is already used.")}));case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),n.state={friends:[],user:{},brand:{},uid:""},n}return Object(v.a)(a,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("message",function(){var e=Object(d.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("addEventListener",t.data),n=t.data,/^[\],:{}\s]*$/.test(n.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))&&(a=JSON.parse(t.data),a.uid,a.brand,a.profile);case 2:case"end":return e.stop()}var n}),e)})));return function(t){return e.apply(this,arguments)}}()),w.getBrandDataByName("Ecosystem",(function(t){console.log("// brand",t),e.setState({brand:t,loading:!1}),e.fetchUsers()}));var t="JwSPBQEfI2kd8tAsoqpV";this.setState({uid:t}),w.getUserDatafromUID(t,(function(t){console.log("// profile",t),e.setState({profile:t})}))}},{key:"componentDidUpdate",value:function(e,t){}},{key:"render",value:function(){var e=this.state,t=e.friends;e.brand;return o.a.createElement("div",{id:"page-container",className:"friends-page-container"},o.a.createElement("div",{id:"main-container"},o.a.createElement("button",{className:"btn_green","data-toggle":"modal","data-target":"#add_community_member"},"Invite a friend"),o.a.createElement("div",{className:"token-earning-container"},o.a.createElement("div",{className:"token-wrapper"},o.a.createElement("img",{src:O.a,alt:"coin"}),o.a.createElement("p",{className:"token-count"},"500")),o.a.createElement("p",null,"Earn \xa35 worth of tokens for each friend you invite to your community.")),o.a.createElement("div",{className:"friends-container"},t.map((function(e){return o.a.createElement("div",{className:"friend-item",key:e.uid},o.a.createElement("img",{src:e.avatar_url?e.avatar_url:I.a,alt:"avatar"}),o.a.createElement("p",{className:"group-username"},o.a.createElement("b",null,e.firstname)))})))),o.a.createElement(S,{addUser:this.addFriend}))}}]),a}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var L=a(45),R=a(33),T=a(72),x={SAVE_PROFILE:function(e,t){return Object(l.a)(Object(l.a)({},e),{},{profile:t.profile})},SAVE_UID:function(e,t){return Object(l.a)(Object(l.a)({},e),{},{uid:t.uid})},SAVE_BRAND:function(e,t){return Object(l.a)(Object(l.a)({},e),{},{brand:t.brand})},SAVE_POST:function(e,t){return Object(l.a)(Object(l.a)({},e),{},{posts:t.posts})},SAVE_USERS:function(e,t){return Object(l.a)(Object(l.a)({},e),{},{users:t.users})},REMOVE:function(e,t){return Object(l.a)(Object(l.a)({},e),{},{profile:null,brand:null,uid:null,posts:null,users:[]})}},W=Object(T.createReducer)({profile:null,uid:"",brand:{},users:[]},x),F=Object(R.b)(W);a(171),a(172);r.a.render(o.a.createElement(L.a,null,o.a.createElement(g.a,{store:F},o.a.createElement(N,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},70:function(e,t,a){e.exports=a.p+"static/media/1.fec7267c.png"},71:function(e,t){e.exports="data:image/png;base64,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"},75:function(e,t,a){e.exports=a(174)},80:function(e,t,a){},86:function(e,t,a){},97:function(e,t,a){}},[[75,1,2]]]);